---
title: oracle
date: 2020-11-20 16:11:23
tags:
---
Oracle数据库跟MySql数据库要复杂一些，有数据库、数据库实例等概念。

### 数据库
Oracle中的数据库指的是物理上的数据库文件或者磁盘中的数据，用户需要通过数据库实例来操作数据库。

### 数据库实例
Oracle 实例是客户端应用程序(用户)和数据库之间的接口。也就是说数据库实例就是一个Oracle数据库服务器中某个后台进程，用户通过这个进程来访问对应的数据库。所以在Oracle链接的时候，是需要指定数据库实例服务名的。
<!--more-->

### 第一次登录
```bash
sqlplus /nolog
connect / as sysdba
select username,account_status from dba_users;
### 第一次登录，为sys、system用户设置初始密码
alter user sys identified by 123456;
alter user system identified by 123456;
exit
### sys 用户登录
sys as sysdba
### 创建WORK用户，注意需要以C##开头
CREATE USER C##WORK IDENTIFIED BY 123456;


```

### 监听器无法启动
```
lsnrctl start LISTENER
Starting tnslsnr:

TNS-12557:TNS:protocol adapter not loadable
TNS-12560:TNS:protocol adapter error
TNS-00527:Protocol Adapter not loadable
```

listener.ora
```
# listener.ora Network Configuration File: D:\WINDOWS.X64_193000_db_home\NETWORK\ADMIN\listener.ora
# Generated by Oracle configuration tools.

SID_LIST_LISTENER =
  (SID_LIST =
    (SID_DESC =
      (SID_NAME = CLRExtProc)
      (ORACLE_HOME = D:\WINDOWS.X64_193000_db_home)
      (PROGRAM = extproc)
      (ENVS = "EXTPROC_DLLS=ONLY:D:\WINDOWS.X64_193000_db_home\bin\oraclr19.dll")
    )
    (SID_DESC =
      (SID_NAME = ORCL)
      (ORACLE_HOME = D:\WINDOWS.X64_193000_db_home)
      (SID_NAME = ORCL)
    )
  )

LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 127.0.0.1)(PORT = 1521))
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
    )
  )

ADR_BASE_LISTENER = D:\WINDOWS.X64_193000_db_home\log
```

tnsnames.ora
```
# tnsnames.ora Network Configuration File: D:\WINDOWS.X64_193000_db_home\NETWORK\ADMIN\tnsnames.ora
# Generated by Oracle configuration tools.

ORACLR_CONNECTION_DATA =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = IPC)(Key = EXTPROC))
    )
    (CONNECT_DATA =
      (SID = CLRExtProc)
      (PRESENTATION = RO)
    )
  )

ORCL =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 127.0.0.1)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = ORCL)
    )
  )
```

### oracle windows环境
如果使用vs在windows环境下进行开发，需要安装ODTwithODAC。下载地址如下：
https://download.oracle.com/otn/other/ole-oo4o/ODTwithODAC122011.zip?AuthParam=1604376209_ac2af019fab4ad7c6eb8360fec98cd0b

## windows编程
### Windows VS ADO
关于ADO的介绍参考：https://blog.csdn.net/i_likechard/article/details/81386694

https://blog.csdn.net/luke2834/article/details/47778639

https://www.cnblogs.com/TenosDoIt/archive/2013/04/15/3022136.html

https://blog.csdn.net/lbcab/article/details/51329207

https://blog.csdn.net/shen_jz2012/article/details/51759858

### Microsoft 官方示例
https://docs.microsoft.com/zh-cn/office/client-developer/access/desktop-database-reference/ado-code-examples-in-microsoft-visual-c

### SOCI使用
https://www.jianshu.com/p/66ac4e90c602
